<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>

    <style>

    </style>


</head>

<body>
    <div id="dataArea">
        <table border="1" width="540px">
            <tr>
                <td>1</td>
                <td>이효리</td>
                <td>2022-10-10</td>
                <td><a href="" data-userno="1" data-guestbook-no="72" data-uname="이효리">삭제</a></td>
            </tr>
            <tr>
                <td colspan="4">이효리 방문하고 갑니다.</td>
            </tr>
        </table>
        <br>

        <table border="1" width="540px">
            <tr>
                <td>2</td>
                <td>유재석</td>
                <td>2022-09-09</td>
                <td><a href="" data-userno="2" data-guestbook-no="73" data-uname="유재석">삭제</a></td>
            </tr>
            <tr>
                <td colspan="4">유재석 방문하고 갑니다.</td>
            </tr>
        </table>
        <br>

        <table border="1" width="540px">
            <tr>
                <td>3</td>
                <td>정우성</td>
                <td>2022-08-08</td>
                <td><a href="" data-userno="3" data-guestbook-no="74" data-uname="정우성">삭제</a></td>
            </tr>
            <tr>
                <td colspan="4">정우성 방문하고 갑니다.</td>
            </tr>
        </table>
        <br>
        <button id="btnGetDate" type="button">데이터수집</button>
    </div>
    <br>

    <script>
        //DOM tree 완성 후
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM 완성');

            //태그 불러오기
            let tbl = document.querySelectorAll('tr');

            // console.log(tbl[0].textContent);
            // console.log(tbl[1].textContent);
            // console.log(tbl[2].textContent);
            // console.log(tbl[3].textContent);
            // console.log(tbl[4].textContent);
            // console.log(tbl[5].textContent);

            //버튼 클릭하면 persons list에 객체로 저장
            let btn = document.querySelector('#btnGetDate');
            btn.addEventListener('click', function () {

                //persons list를 만들고 각 객체를 묶어서 저장
                let persons = [];
                for (let i = 0; i < tbl.length; i += 2) {
                    let personVo = {
                        no: tbl[i].children[0].textContent,
                        name: tbl[i].children[1].textContent,
                        visitDate: tbl[i].children[2].textContent,
                        content: tbl[i + 1].textContent
                    }
                    //persons 리스트에 personVo 정보를 집어 넣음.
                    persons.push(personVo);
                    
                }console.log(persons); //리스트 수집 한 내역 콘솔에 출력
            });
        });

    </script>

</body>



</html>